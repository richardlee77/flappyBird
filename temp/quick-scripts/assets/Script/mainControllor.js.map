{"version":3,"sources":["mainControllor.ts"],"names":[],"mappings":";;;;AAAA,oBAAoB;AACpB,kFAAkF;AAClF,yFAAyF;AACzF,mBAAmB;AACnB,4FAA4F;AAC5F,mGAAmG;AACnG,8BAA8B;AAC9B,4FAA4F;AAC5F,mGAAmG;;AAE7F,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAG1C;IAAsC,4BAAY;IADlD;QAAA,qEAmMC;QA/LG,WAAK,GAAa,IAAI,CAAC;QAGvB,UAAI,GAAW,OAAO,CAAC;QAGvB,WAAK,GAAa,IAAI,CAAC;QAGvB,WAAK,GAAa,IAAI,CAAC;QAGvB,WAAK,GAAa,IAAI,CAAC;QAGvB,WAAK,GAAa,IAAI,CAAC;QAGvB,gBAAU,GAAW,IAAI,CAAC;QAG1B,SAAG,GAAW,IAAI,CAAC;QAGnB,SAAG,GAAW,IAAI,CAAC;QAGnB,iBAAW,GAAW,IAAI,CAAC;QAG3B,iBAAW,GAAW,IAAI,CAAC;QAG3B,iBAAW,GAAW,IAAI,CAAC;QAG3B,iBAAW,GAAW,IAAI,CAAC;QAG3B,aAAO,GAAY,IAAI,CAAC;QAGxB,kBAAY,GAAW,IAAI,CAAC;QAG5B,cAAQ,GAAa,IAAI,CAAC;QAG1B,wBAAwB;QAExB,eAAe;QAEf,UAAI,GAAU,CAAC,CAAC;QAChB,WAAK,GAAU,CAAC,CAAC;QACjB,WAAK,GAAU,CAAC,CAAC;QAEjB,iBAAW,GAAW,KAAK,CAAC;;IAuIhC,CAAC;IArIG,wBAAK,GAAL;QAEI,IAAI,gBAAgB,GAAU,GAAG,CAAC;QAClC,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,GAAC,CAAC,CAAC;QAEvB,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;IAElD,CAAC;IAED,yBAAM,GAAN,UAAQ,EAAS;QACb,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;QACrB,IAAG,IAAI,CAAC,IAAI,GAAG,GAAG,EAAC,EAAC,2BAA2B;YAC3C,IAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAC;gBACtB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACjC;iBAAK,IAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACjC;iBAAK,IAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACjC;iBAAK,IAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAC;gBAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBAC/B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACjC;YAED,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAA,SAAS;SAC1B;QAED,yCAAyC;QACzC,iCAAiC;QAEjC,IAAG,IAAI,CAAC,WAAW,IAAI,KAAK,EAAC,EAAC,gBAAgB;YAC1C,OAAO;SACV;QAED,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAA,QAAQ;QACvC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;QAEnD,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAE,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,CAAA,gBAAgB;QAE7D,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAA,UAAU;QAChC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAEtB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAA,UAAU;QAC1C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEhC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAA,MAAM;QAC5D,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACtD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACtD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAE1D,CAAC;IAED,yBAAM,GAAN,UAAO,EAAU;QACb,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAE,CAAC,CAAC;QACf,IAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAC,EAAC,kCAAkC;YAC9C,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAC,CAAC,CAAC;SACvB;IACL,CAAC;IAED,2BAAQ,GAAR,UAAS,IAAY;QACjB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QACpB,IAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAC,EAAE,CAAC,EAAC;YAClB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,GAAG,GAAC,EAAE,CAAC;YAEzB,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAC,GAAG,CAAC,CAAC,CAAA,uCAAuC;YAE1E,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAA,MAAM;YAClC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAA,8BAA8B;SAC7E;IACL,CAAC;IAED,iCAAc,GAAd,UAAe,IAAY,EAAC,IAAY;QACpC,IAAG,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,EAAE,EAAC,EAAC,gBAAgB;YAC1C,OAAO;SACV;QACD,IAAG,IAAI,CAAC,CAAC,GAAE,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,EAAE,EAAC,EAAC,eAAe;YACxC,OAAO;SACV;QACD,IAAG,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,GAAE,GAAG,CAAC,IAAE,CAAC,IAAI,CAAC,CAAC,GAAE,EAAE,GAAG,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,EAAC,EAAC,UAAU;YACnE,OAAO;SACV;aACG;YACA,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAA,mBAAmB;SAC1C;IAEL,CAAC;IAED,gCAAa,GAAb;QACI,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;IACrB,CAAC;IAED,qCAAkB,GAAlB;QACI,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAElC,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IAED,2BAAQ,GAAR;QACI,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACrC,CAAC;IAED,4BAAS,GAAT;QACI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAElC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;QACzB,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;QACxB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEf,IAAI,gBAAgB,GAAU,GAAG,CAAC;QAClC,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,EAAE,CAAC,GAAC,CAAC,CAAC;QAEvB,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,gBAAgB,GAAG,GAAG,GAAC,CAAC,CAAC;IAClD,CAAC;IA5LD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;2CACI;IAGvB;QADC,QAAQ;0CACc;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2CACG;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2CACG;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2CACG;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2CACG;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACQ;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yCACC;IAGnB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yCACC;IAGnB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACS;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACS;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACS;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACS;IAG3B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACK;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACU;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;8CACM;IAhDT,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAkM5B;IAAD,eAAC;CAlMD,AAkMC,CAlMqC,EAAE,CAAC,SAAS,GAkMjD;kBAlMoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    label: cc.Label = null;\r\n\r\n    @property\r\n    text: string = 'hello';\r\n\r\n    @property(cc.Sprite)\r\n    bird0:cc.Sprite = null;\r\n\r\n    @property(cc.Sprite)\r\n    bird1:cc.Sprite = null;\r\n\r\n    @property(cc.Sprite)\r\n    bird2:cc.Sprite = null;\r\n\r\n    @property(cc.Sprite)\r\n    bird3:cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    birdParent:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    bg0:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    bg1:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    pipeParent0:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    pipeParent1:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    pipeParent2:cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    pipeParent3:cc.Node = null;\r\n\r\n    @property(cc.Label)\r\n    lbscore:cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    nodeGameOver:cc.Node = null;\r\n\r\n    @property(cc.Button)\r\n    btnStart:cc.Button = null;\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    time:number = 0;\r\n    speed:number = 0;\r\n    score:number = 0;\r\n\r\n    isGameStart:boolean = false;\r\n\r\n    start () {//初始时给管子位子赋值坐标\r\n\r\n        let pipeStartOffsetX:number = 200;\r\n        let num = (800 + 52)/4;\r\n\r\n        this.pipeParent0.x = pipeStartOffsetX + num*0;\r\n        this.pipeParent1.x = pipeStartOffsetX + num*1;\r\n        this.pipeParent2.x = pipeStartOffsetX + num*2;\r\n        this.pipeParent3.x = pipeStartOffsetX + num*3;\r\n\r\n    }\r\n\r\n    update (dt:number) {//\r\n        let timeTemp = this.time + dt;\r\n        this.time = timeTemp;\r\n        if(this.time > 0.5){//小鸟扇翅膀，即同一时刻只显示一个bird，然后切换\r\n            if(this.bird0.node.active){\r\n                this.bird0.node.active = false;\r\n                this.bird1.node.active = true;\r\n            }else if(this.bird1.node.active){\r\n                this.bird1.node.active = false;\r\n                this.bird2.node.active = true;\r\n            }else if(this.bird2.node.active){\r\n                this.bird2.node.active = false;\r\n                this.bird3.node.active = true;\r\n            }else if(this.bird3.node.active){\r\n                this.bird3.node.active = false;\r\n                this.bird0.node.active = true;\r\n            }\r\n\r\n            this.time = 0;//不要忘了要清零\r\n        }\r\n        \r\n        // let birdY = this.birdParent.y;  //匀速下落\r\n        // this.birdParent.y = birdY - 2;\r\n\r\n        if(this.isGameStart == false){//游戏没有开始时，以下皆不运行\r\n            return;\r\n        }\r\n\r\n        this.speed = this.speed - 0.05;//给定小鸟速度\r\n        this.birdParent.y = this.birdParent.y + this.speed;\r\n\r\n        this.birdParent.rotation = - this.speed * 10;//上飞，下落的时候旋转一定角度\r\n\r\n        this.moveBg(this.bg0);//调用背景移动函数\r\n        this.moveBg(this.bg1);\r\n\r\n        this.movePipe(this.pipeParent0);//调用管子移动函数\r\n        this.movePipe(this.pipeParent1);\r\n        this.movePipe(this.pipeParent2);\r\n        this.movePipe(this.pipeParent3);\r\n\r\n        this.checkCollision(this.birdParent,this.pipeParent0);//检测碰撞\r\n        this.checkCollision(this.birdParent,this.pipeParent1);\r\n        this.checkCollision(this.birdParent,this.pipeParent2);\r\n        this.checkCollision(this.birdParent,this.pipeParent3);\r\n\r\n    }\r\n\r\n    moveBg(bg:cc.Node){\r\n        bg.x = bg.x -1;\r\n        if(bg.x < -800){//当背景移动到-800（即一个屏幕宽度）时，把背景移动到两个屏幕前\r\n            bg.x = bg.x + 800*2;\r\n        }\r\n    }\r\n\r\n    movePipe(pipe:cc.Node){//管子移动到屏幕外面时（屏幕一半宽度+管子一半宽度），把管子提前到一个屏幕前+管子宽度\r\n        pipe.x = pipe.x - 2;\r\n        if(pipe.x < (-400-26)){\r\n            pipe.x = pipe.x + 800+52;\r\n\r\n            pipe.y = 100 - (Math.random()*100);//给管子y轴一个随机位置，Math.random()会生成一个0-1之间的数\r\n\r\n            this.score = this.score + 1;//得分+1\r\n            this.lbscore.string = this.score.toString();//把label转成字符串，但是很遗憾我这里使用font失败\r\n        }\r\n    }\r\n\r\n    checkCollision(bird:cc.Node,pipe:cc.Node){\r\n        if(bird.x + 17 < pipe.x - 26){//小鸟的最右边x小于管子最左边\r\n            return;\r\n        }\r\n        if(bird.x -17 > pipe.x + 26){//小鸟最左边x大于管子最右边\r\n            return;\r\n        }\r\n        if((bird.y + 12 < pipe.y +100)&&(bird.y -12 > pipe.y - 100)){//两个管子y轴中间\r\n            return;\r\n        }\r\n        else{\r\n            this.gameOver();\r\n            console.log(\"发生碰撞\");//在开发者工具中可以看到“发生碰撞”\r\n        }\r\n        \r\n    }\r\n\r\n    onButtonClick(){//点击时给鸟一个向上的速度\r\n        this.speed = 2.5;\r\n    }   \r\n\r\n    onButtonStartClick(){//点击开始按钮\r\n        this.isGameStart = true;\r\n\r\n        this.nodeGameOver.active = false;\r\n        this.btnStart.node.active = false;\r\n\r\n        this.resetGame();\r\n    }\r\n\r\n    gameOver(){\r\n        this.isGameStart = false;\r\n        this.nodeGameOver.active = true;\r\n        this.btnStart.node.active = true;\r\n    }\r\n\r\n    resetGame(){//重置游戏\r\n        this.nodeGameOver.active = false;\r\n        this.btnStart.node.active = false;\r\n\r\n        this.birdParent.x = -100;\r\n        this.birdParent.y = -33;\r\n        this.speed = 0;\r\n\r\n        let pipeStartOffsetX:number = 200;\r\n        let num = (800 + 52)/4;\r\n\r\n        this.pipeParent0.x = pipeStartOffsetX + num*0;\r\n        this.pipeParent1.x = pipeStartOffsetX + num*1;\r\n        this.pipeParent2.x = pipeStartOffsetX + num*2;\r\n        this.pipeParent3.x = pipeStartOffsetX + num*3;\r\n    }\r\n\r\n\r\n}\r\n"]}